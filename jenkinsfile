node{    
    sh "pwd>current_path"
   echo '1'
   env.WORKSPACE = readFile 'current_path'
   echo '2'
   env.WORKSPACE = env.WORKSPACE.trim()
   echo '3'
   stage('Preparation') {
      mvnHome = tool 'Maven3'
   }
   stage "checkout"
   checkout scm
   
   stage 'build'
   sh "'${mvnHome}/bin/mvn' -DskipTests clean package" 
   
   stage 'upload'
   sh 'chmod 777 /target/BarclayDemoApp.jar'
   sh 'curl -v -u admin:admin123 --upload-file /target/BarclayDemoApp.jar http://9.77.87.209::8081/nexus/content/repositories/releases'
    
       }
