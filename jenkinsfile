node{    
    sh "pwd>current_path"
   echo '1'
   env.WORKSPACE = readFile 'current_path'
   echo '2'
   env.WORKSPACE = env.WORKSPACE.trim()
   echo '3'
   stage('Preparation') {
      mvnHome = tool 'Maven3'
   }
   stage "checkout"
   checkout scm
   
   stage 'build'
   sh "'${mvnHome}/bin/mvn' -DskipTests clean package" 
   
   stage('Publish') {
     nexusPublisher nexusInstanceId: 'NexusServer', nexusRepositoryId: 'releases', packages: [[$class: 'MavenPackage', mavenAssetList: [[classifier: '', extension: '', filePath: '/var/jenkins_home/workspace/Sample-Pipeline/target/BarclayDemoApp.jar']], mavenCoordinate: [artifactId: 'BarclayDemoApp', groupId: 'com.barclay.demo', packaging: 'jar', version: '0.0.1-SNAPSHOT']]]

   }
   
    
       }
